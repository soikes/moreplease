package components

import (
	"io/fs"
	"path"
	"soikke.li/moreplease/pkg/assets"
)

var jsImports = templ.NewOnceHandle()

templ HashedImports(fsys fs.FS) {
	{{
		src := "assets/app.min.js"
		srcHash, err := assets.HashAsset(fsys, path.Base(src))
		if err != nil {
			panic(err)
		}
		style := "assets/styles.css"
		styleHash, err := assets.HashAsset(fsys, path.Base(style))
		if err != nil {
			panic(err)
		}
	}}
	@jsImports.Once() {
		<script type="text/javascript" src={ src } integrity={ srcHash }></script>
	}
	<link rel="stylesheet" href={ style } integrity={ styleHash }/>
}
